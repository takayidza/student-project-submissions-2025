{% extends 'layouts/base.html' %}
{% load static%}

{% block navigation %}
<div class="row">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
        <div class="page-header">
            <h2 class="pageheader-title text-primary">All Alerts</h2>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <div class="fixed-content p-0"> 
        <div class="container">
            <div class="main-content">
                <div class="left-content">
                    <a href="javascript:window.history.back();" class="back-btn">
                        <svg width="18" height="18" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.03033 0.46967C9.2966 0.735936 9.3208 1.1526 9.10295 1.44621L9.03033 1.53033L2.561 8L9.03033 14.4697C9.2966 14.7359 9.3208 15.1526 9.10295 15.4462L9.03033 15.5303C8.76406 15.7966 8.3474 15.8208 8.05379 15.6029L7.96967 15.5303L0.96967 8.53033C0.703403 8.26406 0.679197 7.8474 0.897052 7.55379L0.96967 7.46967L7.96967 0.46967C8.26256 0.176777 8.73744 0.176777 9.03033 0.46967Z" fill="#a19fa8"/>
                        </svg>
                    </a>
                </div>
                
                <div class="mid-content">
                    <h5 class="mb-0 text-center">All Alerts</h5>
                </div>
                {% comment %} <div class="right-content">
                    <a href="{% url 'alert_create' %}" class="btn btn-dark btn-sm" data-toggle="tooltip" data-placement="top" title="Add Alert">
                        <i class="fas fa-plus"></i> Add Alert
                    </a>
                </div> {% endcomment %}
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="list item-list recent-jobs-list search-header">
            <ul>
                {% for alert in alerts %}
                    <li class="list-group-item">
                        <div class="row alert alert-danger fade show" role="alert">
                            <div class="col-6">
                                <strong>User:</strong> {{ alert.user }}<br>
                                {% comment %} <strong>Message:</strong> {{ alert.message }}<br> {% endcomment %}
                                <strong>Start:</strong> {{ alert.start }}<br>
                                <strong>Destination:</strong> {{ alert.destination }}<br>
                            </div>
                            <div class="col-6">
                                <strong>Timestamp:</strong> {{ alert.timestamp }}<br>
                                {% comment %} <a href="{% url 'alert_detail' alert.pk %}" class="btn btn-info btn-sm" data-toggle="tooltip" data-placement="top" title="View">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="{% url 'alert_update' alert.pk %}" class="btn btn-warning btn-sm" data-toggle="tooltip" data-placement="top" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                             <!-- Trigger the modal with a button -->
                            <button type="button" class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal{{ alert.pk }}" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button> {% endcomment %}

                            <!-- Modal -->
                            {% comment %} <div class="modal fade" id="deleteModal{{ alert.pk }}" tabindex="-1" aria-labelledby="deleteModalLabel{{ alert.pk }}" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header bg-danger text-white">
                                            <h5 class="modal-title" id="deleteModalLabel{{ alert.pk }}">Confirm Delete</h5>
                                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Are you sure you want to delete this alert? This action cannot be undone.
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                            <a href="{% url 'alert_delete' alert.pk %}" class="btn btn-danger">Yes, Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div> {% endcomment %}

                            </div>
                        </div>
                    </li>
                {% empty %}
                    <li class="list-group-item text-muted">No Alerts Available.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}
